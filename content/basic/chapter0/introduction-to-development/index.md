---
title: "程序开发流程"
date: 2022-12-28T16:40:41+08:00
---

软件开发，通常遵循如下的流程：
{{< img src="./dev.svg" title="程序开发流程">}}

***

## 需求分析

首先，需要明确需要编程去解决的问题。

例如：

* 开发一个能够将输入数字进行加减乘除的计算器
* 开发一个转换图片格式的程序
* 开发一个统计excel中指定信息的软件

***

## 方案设计

这一步，需要去思考采用何种方案去解决问题。针对一个问题可能会有许多或好或坏的解法，需要仔细思考才能挑选出优秀的解法。

「方案设计」在软件开发中经常会被忽略。大部分情况可能拍脑袋，有一个思路，就开始进行编程。
通常这样容易编写出脆弱且充满「bug」的程序。

{{< alert success >}}
**bug是什么含义?**

1947年9月9日，Grace Hopper在哈佛大学计算实验室研究计算机MarkII和Mark III。

在计算机进行运行时，它突然停止了工作。于是技术人员爬上去找原因，发现这台巨大的计算机内部一组继电器的触点之间有一只飞蛾，这显然是由于飞蛾受光和热的吸引，飞到了触点上，然后被高电压击死。所以在报告中，Hopper用胶条贴上飞蛾，并把“bug”来表示“一个在电脑程序里的错误”，“Bug”这个说法一直沿用到今天。
{{< /alert >}}

{{< img src="./bug.jpeg" title="bug第一次用来描述程序中的错误">}}

好的解决方案通常有以下的特征：
* 简洁不复杂
* 容易写出来并被别人理解
* 模块化，只需要略加修改，系统的每个部分都可以复用或着单独升级
* 具有健壮性，当异常情况发生时，容易恢复或者能有明确的错误信息

***

## 编写程序

编写程序需要2个必备条件。首先需要了解所使用的编程语言，这也就正是本教程所讲授的。其次，需要准备一个文本编辑器来编写代码。

代码是编译器能够理解的文本。因此你可以使用任何你喜欢的文本编辑器，比如notepad，vi，emacs等。
但是更推荐使用一些专门为此编程设计的编辑器，这些下一章节中会进行介绍。

好的编辑器可以使我们的编程更加容易：

* 需要可以显示行号。当程序编译失败时，编辑器会提示在某一行的代码中存在错误，有行号的编辑器能方便的定位到错误代码的位置。
* 语法高亮。语法高亮能够帮助我们结构化的理解程序，清楚的展示出程序的不同组成部分。
* 可以挑选一个合适的字体。需要能够区分出数字「0」和字母「O」,数字「1」和字母「I」（大写的i）以及「l」（小写的L）。同时这里也推荐选择等宽字体（monospaced font），可以容易的对齐代码缩进。字体名称里含有「mono」的一般就是等宽字体，例如「DejaVu Sans Mono」这个字体就可以。

下面就是一个带行号与语法高亮的例子：
```C++
#include <iostream>

int main()
{
    std::cout << "Hello World!";
    return 0;
}
```

C++程序文件一般以「.cpp」作为文件后缀，不过有些人也喜欢使用「.cc」后缀。这里推荐使用「.cpp」。

大多数的C++程序都会有多个cpp文件组成。大型C++的程序，可能含有成千上万的cpp文件。
一开始我们会从只含有单个cpp文件的程序开始进行学习和编写。

***

## 编译

在得到可执行程序之前，需要使用C++编译器对C++源代码进行编译。目前比较流程的编译器有GCC，LLVM，MSVC。

在编译「.cpp」文件时，编译器主要会做如下两部分操作：

1. 检查代码是否符合C++语言的规范，如果不符合，则会给出对应有问题的行号。直到代码中所有的语法错误都被修改完成，这一步才能通过。
2. 将代码转换成由机器语言组成的文件，这个文件被称作「目标文件」。通过后缀是「.o」或者「.obj」，前缀与对应的cpp文件名一致。

如下，有3个「.cpp」文件，生成了对应的3个「.o」目标文件。
{{< img src="./compile.svg" title="编译">}}

***

## 链接

为了得到最终的可执行文件，需要使用「链接器」将目标文件组合到一起。需要链接到一起的有如下三部分：

1. 编译器产出的目标文件
2. C++标准库。C++语言本身并不提供太多的功能，许多额外的有用的功能都被打包到「C++标准库」中。一般情况下C++标准库默认会被链接，不需要额外的设置。
3. 其它预编译好的库文件。许多目标文件，打包到一起，其它程序可以使用它们的功能，这就是库文件。例如，如果想编写一个播放音乐的软件，如何解析与验证音频，如何让硬件来播放。完成这些功能需要大量的编程工作。为了完成我们的需求，通常会去下载一个别人已经编写好的能支持这些功能的库。通过使用别人的库来快速的开发我们的程序。

{{< img src="./link.svg" title="链接">}}

在产出最终的可执行文件时，链接器会检查所有的跨文件依赖。例如，我们在A.cpp中定义某个功能，在B.cpp中进行使用，在链接时，会将这种依赖连接起来。

如果发现某个功能找不到定义，或者有重复的定义。链接器就会给出对应的报错。

***

## 测试与调试

至此，可以运行最后得到的可执行文件，「测试」下运行的结果是否符合我们的预期。

如果程序不能正常工作，就需要去「调试」程序，看是哪里出的问题。在后续会详细讲解如何进行调试。

***

{{< prevnext prev="/basic/chapter0/introduction-to-c-cpp/" next="/basic/chapter0/install-dev-env/" >}}
0.2 C与C++
<--->
0.4 安装开发环境
{{< /prevnext >}}
