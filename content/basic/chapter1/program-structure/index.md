---
title: "程序结构介绍"
date: 2022-12-28T16:40:41+08:00
---

在C++中，最经常使用的部分就是「语句」和「函数」。

在写文章的时候，我们会将文章拆分为段落和句子。在代码的组织上，「函数」就类似于段落，「语句」就相当于句子。

***
## 语句

「语句」是C++中独立计算的最小的指令单元。大部分的语句都是以「;」结尾。对于C++而言，一个语句，编译后基本会对应多条机器指令。

常用的语句类型如下:
1. 声明语句
2. 表达式语句
3. 跳转语句
4. 复合语句
5. 选择语句
6. 迭代语句
7. 异常捕获块

下面是每种语句的简单例子，后面的学习过程中会详细讲解每种语句的用法。
```C++
// 声明语句
int n = 1;

// 表达式语句
n = n + 1;
std::cout << "n = " << n << std::endl;

// 跳转语句
mylabel:
    cout << n << ", ";
    n--;
    if (n>0) goto mylabel;

// 复合语句
{ 语句1; 语句2; 语句3; }

// 选择语句
if (x == 100) cout << "x is 100";

// 迭代语句
while (n>0) {
    cout << n << ", ";
    --n;
}

// 异常捕获块
try
{
    throw 20;
}
catch (int e)
{
    cout << "An exception occurred. Exception Nr. " << e << '\n';
}
```

***
## 函数及main函数

「函数」将一系列的「语句」打包到一起。执行函数时，会按顺序去执行这些语句。
通过使用函数，可以指代一系列语句。也就是说，通过创建函数，相当于创建了一个新的指令。

{{< alert success >}}
**main函数**

每个C++程序都需要有一个main函数。程序启动时，顺序的执行main函数中的语句，直到程序结束。
{{< /alert >}}

编写函数时，通常是为了做某个特定的工作，例如如下的「max」函数，就用来求两个数中最大的那个。

```C++
int max(int a, int b)
{
    if (a > b)
    {
        return a;
    }
    return b;
}
```

使用函数有如下好处：
1. 减少重复代码
2. 提高程序可读性
3. 降低程序的维护成本

{{< alert secondary >}}
**注**

在后续，会使用「函数名」+「()」来指代函数。例如，main()或者doSomething(),而不是函数main或者函数doSomething。
{{< /alert >}}


***
## Hello World程序的拆解

有了语句和函数的概念，下面来简单拆解下「Hello World」程序。

```C++
#include <iostream>

int main()
{
    std::cout << "Hello World!" << std::endl;
    return 0;
}
```

第一行是一条「预处理」指令。代表下面的程序要使用「iostream」库。iostream是C++提供的用来读写命令行的标准库。
第五行中的std::cout与std::endl即是iostream库中功能。
如果没有本行，编译器会报错，无法找到std::cout与std::endl的定义。

第二行是空行，不会被编译。通常在程序中会使用空行来将不同的部分隔开，增加程序的可读性。

第三行告诉编译器，要定义main函数。

第四行与第七行，是用来标示main函数的开始与结束。

第五行是main函数的第一条语句。std::cout代表着字符串输出。
「<<」表示将右边的内容，发送给左边的对象，在这里就是表示着输出到命令行中。
std::endl表示换行。

第六行是一个返回语句。在程序执行完成后，通过该语句来告诉操作系统程序执行是够成功。
在大部分操作系统中，返回「0」代表程序执行成功。

***
## 语法错误

文本组成语句，函数以及程序的规则，被称作程序的「语法」。就如同写作文时，每句话都需要「。」来结尾一样。

只有符合C++语法的文本，才能被C++编译器成功编译，否则编译器会进行报错，这类的错误又被称为「语法错误」。

```C++
#include <iostream>

int main()
{
    int a;
    int b;
    std::cout << "Hello World!" << std::endl;
    return 0
}
```

在上面的程序中，第8行的结尾，少写了「；」。编译器会给出如下的报警：

{{< img src="./syntax_err.png" title="语法错误">}}

这告知我们，在第9行的「}」之前少了的「;」。语法错误时编程时常见的错误。幸运的是编译器一般会明确的告知错误的位置，因此比较容易修改。

你可以尝试删除程序中任意的地方，看编译器会分别给出什么样的报错。

***

{{< prevnext prev="/basic/chapter0/write-first-program/" next="/basic/chapter1/comment/" >}}
第一个C++程序
<--->
注释
{{< /prevnext >}}