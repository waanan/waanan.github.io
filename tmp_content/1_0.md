---
title: "语句和程序的结构"
date: 2023-10-09T20:06:10+08:00
---

***
## 第二章绪论

欢迎来到这些C++教程的第一个主要章节！

在本章中，我们将首先看一看对每个C++程序都至关重要的一些主题。因为有相当多的主题要讨论，所以我们将在相当浅的层次上讨论大多数内容（刚好够应付）。本章的目标是帮助您理解基本C++程序是如何构造的。在本章结束时，您将能够编写自己的简单程序。

在以后的章节中，我们将重新讨论这些主题的大部分，并更详细地探讨它们。我们还将介绍在这些基础上构建的新概念。

为了保持课时长度的可管理性，主题可以分为几个后续课程。如果您觉得某个重要概念没有在课程中涵盖，则可能在下一课中涵盖。

***
## 对账单

计算机程序是告诉计算机做什么的指令序列。语句是一种指令类型，它使程序执行某种操作。

语句是C++程序中最常见的指令类型。这是因为它们是C++语言中最小的独立计算单元。在这方面，它们的行为很像自然语言中的句子。当我们想把一个想法传达给另一个人时，我们通常用句子来写或说（而不是用随机的单词或音节）。在C++中，当我们想让程序做某事时，我们通常会编写语句。

C++中的大多数（但不是所有）语句都以分号结尾。如果看到以分号结尾的行，则可能是一条语句。

在高级语言（如C++）中，单个语句可以编译为许多机器语言指令。

{{< alert success >}}
**对于高级读者**

C++中有许多不同类型的语句：

当您完成本教程系列时，您将了解所有这些是什么！

{{< /alert >}}

***
## 功能和主要功能

在C++中，语句通常被分组为称为函数的单元。函数是按顺序（按顺序，从上到下）执行的语句的集合。当您学习编写自己的程序时，您将能够创建自己的函数，并以任何方式混合和匹配语句（我们将在以后的课程中演示如何）。

程序通常在函数main内的最后一条语句执行后终止（完成运行）（尽管在某些情况下，程序可能会在早期中止，或在之后进行一些清理）。

通常编写函数来执行特定的工作。例如，名为“max”的函数可能包含计算两个数字中哪个更大的语句。名为“calculateGrade”的函数可以从一组测试成绩中计算学生的成绩。我们将很快更多地讨论函数，因为它们是程序中最常用的组织工具。

{{< alert success >}}
**规则**

每个C++程序都必须有一个名为main的特殊函数（所有小写字母）。当程序运行时，main中的语句将按顺序执行。

{{< /alert >}}

{{< alert success >}}
**作者注释**

在讨论函数时，在函数名称的末尾附加一对括号是相当常见的速记。例如，如果您看到术语main（）或doSomething（），这是分别名为main或doSomething的函数的缩写。这有助于将函数与具有名称的其他事物（如变量）区分开来，而不必每次都写单词“function”。

{{< /alert >}}

***
## 剖析Hello世界！

现在您已经简要了解了什么是语句和函数，让我们回到我们的“Hello world”程序，并更详细地从较高的层次查看每一行的功能。

```C++
#include <iostream>

int main()
{
   std::cout << "Hello world!";
   return 0;
}
```

第1行是一种特殊类型的行，称为预处理器指令。此预处理器指令指示我们希望使用iostream库的内容，该库是C++标准库的一部分，允许我们从控制台读取和写入文本。我们需要此行才能在第5行上使用std:：cout。排除这一行将导致第5行出现编译错误，因为编译器不会知道std:：cout是什么。

第2行为空，并且被编译器忽略。这一行的存在只是为了帮助使程序对人类更具可读性（通过分离#include预处理器指令和程序的后续部分）。

第3行告诉编译器，我们将编写（定义）一个名为main的函数。正如您在上面学到的，每个C++程序都必须有一个主函数，否则它将无法链接。

第4行和第7行告诉编译器哪些行是主函数的一部分。第4行的左花括号和第7行的右花括号之间的所有内容都被认为是主函数的一部分。这称为函数体。

第5行是函数main中的第一条语句，也是我们运行程序时将执行的第一个语句。std:：cout（代表“字符输出”）和<<运算符允许我们在控制台上显示信息。在本例中，我们将显示文本“Hello world！”。该语句创建程序的可见输出。

第6行是返回语句。当可执行程序完成运行时，该程序将值发送回操作系统，以指示它是否成功运行。这个特定的return语句将值0返回给操作系统，这意味着“一切正常！”。这是程序中执行的最后一条语句。

我们编写的所有程序都将遵循此通用模板或其变体。

您可以自己编译和运行该程序，您将看到它将以下内容输出到控制台：

如果在编译或执行该程序时遇到问题，请参阅第0.8课——几个常见的C++问题。

{{< alert success >}}
**作者注释**

如果上述解释的部分（或全部）令人困惑，那么在这一点上是可以预料的。这只是提供一个快速概述。后续课程将深入研究上述所有主题，并提供大量额外的解释和示例。

{{< /alert >}}

***
## 语法和语法错误

在英语中，句子是根据你可能在学校英语课上学到的特定语法规则构造的。例如，正常的句子以句号结尾。支配语言中句子如何构造的规则称为句法。如果你忘记了句点，并同时运行两个句子，这违反了英语语法。

C++也有一个语法：关于程序必须如何构造才能被认为有效的规则。编译程序时，编译器负责确保程序遵循C++语言的基本语法。如果您违反了规则，编译器将在您尝试编译程序时投诉，并向您发出语法错误。

让我们看看如果省略“Hello world”程序第5行的分号会发生什么，如下所示：

```C++
#include <iostream>

int main()
{
   std::cout << "Hello world!"
   return 0;
}
```

请随意自己编译这个格式错误的程序。

Visual Studio产生以下错误（编译器可能会生成具有不同措辞的错误消息）：

这告诉您在第6行有一个语法错误：编译器希望在返回语句之前有一个分号，但它没有找到。尽管编译器在遇到语法错误时会告诉您它正在编译哪一行代码，但省略实际上可能在前一行。在这种情况下，错误实际上在第5行的末尾（编译器直到第6行才发现问题）。

编写程序时，语法错误很常见。幸运的是，它们通常很容易找到和修复，因为编译器通常会直接指向它们。只有解决了所有语法错误，程序的编译才会完成。

您可以尝试从“Hello world”程序中删除字符甚至整行，以查看生成的各种错误。尝试恢复第5行末尾丢失的分号，然后删除第1、3或4行，看看会发生什么。

***
## 测验时间

下面的测验旨在加强您对上述材料的理解。

