---
title: "为什么函数有用，以及如何有效地使用它们"
date: 2023-10-09T20:06:10+08:00
---

既然我们已经介绍了什么是函数及其一些基本功能，那么让我们更仔细地看看它们为什么有用。

***
## 为什么使用函数？

新程序员经常会问，“我们不能把所有的代码都放在主函数中吗？”对于简单的程序，你绝对可以。然而，函数提供了许多好处，使它们在长度或复杂性不平凡的程序中非常有用。

1. 组织——随着程序复杂性的增加，将所有代码都放在main（）函数中变得越来越复杂。函数几乎就像一个迷你程序，我们可以独立于主程序编写，而不必在编写时考虑程序的其余部分。这允许我们将复杂的程序简化为更小、更易于管理的块，这降低了程序的整体复杂性。
2. 可重用性——一旦编写了函数，就可以在程序中多次调用它。这避免了重复代码（“不要重复自己”），并将复制/粘贴错误的概率降至最低。函数也可以与其他程序共享，从而减少每次必须从头编写（并重新测试）的代码量。
3. 测试——因为函数减少了代码冗余，所以首先要测试的代码更少。此外，因为函数是自包含的，一旦我们测试了函数以确保其工作，我们就不需要再次测试它，除非我们更改它。这减少了我们一次必须测试的代码量，从而更容易发现错误（或首先避免错误）。
4. 可扩展性——当我们需要扩展程序来处理它以前没有处理的情况时，函数允许我们在一个地方进行更改，并使更改在每次调用函数时生效。
5. 抽象——为了使用函数，您只需要知道它的名称、输入、输出以及它所在的位置。您不需要知道它是如何工作的，也不需要知道使用它所依赖的其他代码。这降低了使用其他人的代码（包括标准库中的所有内容）所需的知识量。


有效使用函数

新程序员遇到的最大挑战之一（除了学习语言）是理解何时以及如何有效地使用函数。下面是编写函数的一些基本准则：

1. 在程序中出现多次的语句组通常应成为函数。例如，如果我们以相同的方式多次读取用户的输入，则这是函数的一个很好的候选者。如果我们在多个位置以相同的方式输出某些内容，那也是函数的一个很好的候选者。
2. 具有一组定义良好的输入和输出的代码是函数的良好候选，（特别是当它很复杂时）。例如，如果我们有一个要排序的项列表，那么执行排序的代码将成为一个很好的函数，即使它只完成一次。输入是未排序的列表，输出是已排序的列表。另一个很好的预期功能是模拟六边形骰子滚动的代码。您当前的程序可能只在一个地方使用它，但如果您将其转换为函数，则它可以在以后扩展程序或在未来的程序中重用。
3. 一个函数通常应该执行一个（并且只能执行一个）任务。
4. 当函数变得太长、太复杂或难以理解时，可以将其划分为多个子函数。这称为重构。我们在第3.10课中讨论了更多关于重构的内容——在问题变成问题之前发现问题。


通常，在学习C++时，您将编写许多涉及3个子任务的程序：

对于琐碎的程序（例如，少于20行代码），其中的一些或全部可以在函数main中完成。然而，对于较长的程序（或仅用于实践），这些都是单个函数的良好候选。

新程序员通常将计算值和打印计算值结合到单个函数中。然而，这违反了函数的“一个任务”经验法则。计算值的函数应该将值返回给调用方，并让调用方决定如何处理计算值（例如调用另一个函数来打印值）。

